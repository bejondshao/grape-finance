# å¼ºKçªå›´æ¨¡å¼äº¤æ˜“ç­–ç•¥

## ç­–ç•¥æ¦‚è¿°

å¼ºKçªå›´æ¨¡å¼æ˜¯ä¸€ç§åŸºäºä¸»åŠ›è¡Œä¸ºè¯†åˆ«çš„é«˜ç¡®å®šæ€§å³ä¾§äº¤æ˜“ç­–ç•¥ã€‚é€šè¿‡æ•æ‰ä¸»åŠ›ä»åº•éƒ¨å¸ç­¹åˆ°æ‹‰å‡çš„å…¨è¿‡ç¨‹ï¼Œåœ¨å¼ºKå‡ºç°æ—¶ç²¾å‡†å…¥åœºï¼Œè·Ÿéšä¸»åŠ›è·å–ä¸»å‡æµªæ”¶ç›Šã€‚

## æ ¸å¿ƒç†å¿µ

**å·¦ä¾§vså³ä¾§äº¤æ˜“æœ¬è´¨åŒºåˆ«ï¼š**
- **å·¦ä¾§äº¤æ˜“**ï¼šåšå¼ˆä¸ç¡®å®šæ€§çš„æœªæ¥æœºä¼šï¼Œé¢„æµ‹åº•éƒ¨
- **å³ä¾§äº¤æ˜“**ï¼šæ•æ‰ç¡®å®šæ€§çš„æ˜ç¡®è¶‹åŠ¿ï¼Œè·Ÿéšä¸»åŠ›è¡Œä¸º

**å¼ºKæ¨¡å¼æ ¸å¿ƒé€»è¾‘ï¼š**
åº•éƒ¨æ‰¿æ¥ â†’ ä¸»åŠ›å¸ç­¹ â†’ å·¦å³°å½¢æˆ â†’ é‡åœ¨ä»·å…ˆ â†’ å¼ºKçªç ´ â†’ ä¸»å‡æµª

## äº”å¤§å…³é”®é˜¶æ®µ

### 1. ğŸŸ¢ åº•éƒ¨èµ„é‡‘æ‰¿æ¥ä¿¡å·
**è¯†åˆ«æ¡ä»¶ï¼š**
- é•¿æœŸä¸‹è·Œåå‡ºç°ææ…Œæ€§é•¿é˜´ï¼ˆå¸¦é•¿ä¸‹å½±ï¼‰
- éšåå‡ºç°å¸¦é•¿ä¸‹å½±çš„é˜³çº¿ï¼Œè¡¨æ˜èµ„é‡‘æ‰¿æ¥
- æˆäº¤é‡æ”¾å¤§ï¼ŒRSIå¤„äºè¶…å–åŒºåŸŸ

**æŠ€æœ¯ç‰¹å¾ï¼š**
```
ä¸‹è·Œå¹…åº¦ > 20%
ææ…Œé•¿é˜´ï¼šé˜´çº¿ + é•¿ä¸‹å½± > å®ä½“50%
æ‰¿æ¥é˜³çº¿ï¼šé˜³çº¿ + é•¿ä¸‹å½± > å®ä½“30% + æ”¾é‡ > 1.2å€ + RSI < 30
```

### 2. ğŸŸ¡ ä¸»åŠ›å¸ç­¹é˜¶æ®µ
**è¯†åˆ«ç‰¹å¾ï¼š**
- å°è¿é˜³è¿ç»­æ‹‰å‡ï¼Œæ— æ”¾é‡é˜³çº¿çªç ´
- é‡èƒ½æ— å¤§å¹…å¼‚åŠ¨ï¼ˆ<2å€ï¼‰
- è¾¹æ‹‰è¾¹æµ‹è¯•ï¼Œå€Ÿæœºå¸ç­¹

**æŠ€æœ¯è¦ç‚¹ï¼š**
```
è¿ç»­5æ—¥ä»¥ä¸Šé˜³çº¿
æˆäº¤é‡ç¨³å®šï¼Œæ— å¤§å¹…å¼‚åŠ¨
ä»·æ ¼æ¸©å’Œä¸Šæ¶¨ï¼Œæ— æš´æ¶¨
```

### 3. ğŸŸ  å·¦å³°å½¢æˆ
**å½¢æˆæœºåˆ¶ï¼š**
- ä¸»åŠ›æ‹‰å‡è¿‡ç¨‹ä¸­é­é‡æŠ›å‹
- å½¢æˆé˜¶æ®µæ€§é«˜ç‚¹åå›è°ƒ
- ä¸»åŠ›å¼€å¯æ–°ä¸€è½®æ´—ç›˜å¸ç­¹

**è¯†åˆ«æ ‡å‡†ï¼š**
```
20æ—¥å†…æœ€é«˜ç‚¹ä¸ºå·¦å³°
å›è°ƒå¹…åº¦ > 10%
å·¦å³°åè¿›å…¥æ´—ç›˜é˜¶æ®µ
```

### 4. ğŸ”´ é‡åœ¨ä»·å…ˆå‰ç½®æ¡ä»¶
**æ ¸å¿ƒä¿¡å·ï¼š**
- æ´—ç›˜è¿‡ç¨‹ä¸­å‡ºç°æ”¾é‡é•¿é˜³ï¼ˆå€é‡çŠ¶æ€ï¼‰
- **ä»·æ ¼æœªçªç ´å·¦å³°ï¼Œä½†é‡èƒ½çªç ´å·¦å³°é‡èƒ½**
- å¼ºKçªå›´çš„å…³é”®å‰ç½®æ¡ä»¶

**æŠ€æœ¯ç¡®è®¤ï¼š**
```
æˆäº¤é‡ > 2å€å¹³å‡é‡ï¼ˆå€é‡çŠ¶æ€ï¼‰
ä»·æ ¼ < å·¦å³°é«˜ç‚¹
æˆäº¤é‡ > å·¦å³°é«˜ç‚¹æˆäº¤é‡
åç»­ä¸å†åˆ›æ–°ä½ï¼Œä¸»åŠ›æ§ç›˜
```

### 5. âš¡ å¼ºKçªç ´ï¼ˆå³ä¾§äº¤æ˜“èµ·ç‚¹ï¼‰
**å¼ºKå®šä¹‰ï¼š**
- é‡åœ¨ä»·å…ˆæ¡ä»¶å‡ºç°åï¼Œè°ƒæ•´é˜¶æ®µå†æ¬¡å‡ºç°å€é‡/å¤©é‡é˜³çº¿
- **ä»·æ ¼çªç ´å·¦å³°é«˜ç‚¹ä¸è¯•ç›˜é«˜ç‚¹**
- **ä¸»åŠ›çœŸé‡‘ç™½é“¶è¿›åœºï¼Œå¼€å§‹æ¨åŠ¨è¡Œæƒ…ä¸Šè¡Œ**

**å¼ºKç‰¹å¾ï¼š**
```
å€é‡/å¤©é‡é˜³çº¿ï¼ˆâ‰¥2å€é‡ï¼‰
ä»·æ ¼çªç ´å·¦å³°é«˜ç‚¹
çªç ´è¯•ç›˜é«˜ç‚¹
MA20æ”¯æ’‘ + MACDé‡‘å‰ç¡®è®¤
```

## æ“ä½œç­–ç•¥

### ğŸ¯ å¼ºKä½ç½®å…¥åœº
**å…¥åœºæ—¶æœºï¼š** å¼ºKå‡ºç°æ—¶ç«‹å³å…¥åœº
**æ­¢æŸè®¾ç½®ï¼š** ä»¥å¼ºKåº•éƒ¨ä½œä¸ºé˜²å®ˆæ­¢æŸä½
**ç›®æ ‡è®¾å®šï¼š** åŸºäºå¼ºKå¹…åº¦çš„3å€ç›®æ ‡ä½

### ğŸ›¡ï¸ é£é™©æ§åˆ¶
**æ­¢æŸåŸåˆ™ï¼š**
- å¼ºKåº•éƒ¨æ­¢æŸï¼ˆç¡¬æ­¢æŸï¼‰
- ç§»åŠ¨æ­¢æŸï¼šæœ€é«˜ä»·å›æ’¤15%
- æŠ€æœ¯æ­¢æŸï¼šè·Œç ´MA20æˆ–MACDæ­»å‰

**ä»“ä½ç®¡ç†ï¼š**
- å•ç¬”é£é™©ï¼š3%
- æ€»é£é™©æ§åˆ¶ï¼š15%
- å¼ºKä¿¡å·å¯å¢åŠ 20%ä»“ä½

## æŠ€æœ¯å®ç°

### æ ¸å¿ƒç®—æ³•
```python
# å¼ºKè¯†åˆ«ç®—æ³•
def identify_strong_k_signal(self, df, current_idx, symbol):
    # 1. å€é‡ç¡®è®¤
    volume_multiplier = current['volume'] / volume_ma20
    strong_volume = volume_multiplier >= 2.0
    
    # 2. ä»·æ ¼çªç ´
    price_breakout = current['close'] > left_peak['price']
    
    # 3. æŠ€æœ¯ç¡®è®¤
    ma_support = current['close'] > MA20
    macd_confirm = MACD_DIF > MACD_SIGNAL
    
    return strong_volume and price_breakout and ma_support and macd_confirm
```

### é˜¶æ®µè·Ÿè¸ª
```python
# å¸‚åœºé˜¶æ®µçŠ¶æ€æœº
market_stages = {
    'watching': 'è§‚å¯Ÿé˜¶æ®µ',
    'bottom': 'åº•éƒ¨æ‰¿æ¥',
    'accumulation': 'å¸ç­¹é˜¶æ®µ', 
    'left_peak': 'å·¦å³°å½¢æˆ',
    'volume_first': 'é‡åœ¨ä»·å…ˆ',
    'strong_k': 'å¼ºKçªç ´',
    'rally': 'ä¸»å‡æµª'
}
```

## ä½¿ç”¨æ–¹æ³•

### 1. ç­–ç•¥åˆå§‹åŒ–
```python
from strong_k_breakout_strategy import StrongKBreakoutStrategy

strategy = StrongKBreakoutStrategy(
    initial_capital=100000,
    max_position_pct=0.03,  # å•ç¬”é£é™©3%
    max_positions=3
)
```

### 2. ç”Ÿæˆäº¤æ˜“ä¿¡å·
```python
# å‡†å¤‡OHLCVæ•°æ®
data = pd.DataFrame({
    'open': [...],
    'high': [...],
    'low': [...], 
    'close': [...],
    'volume': [...]
}, index=pd.date_range(start='2020-01-01', periods=1000))

# ç”Ÿæˆå¼ºKä¿¡å·
signals = strategy.generate_signals(data, 'AAPL')

for signal in signals:
    print(f"{signal.timestamp}: {signal.action} {signal.symbol}")
    print(f"é˜¶æ®µ: {signal.stage}, åŸå› : {signal.reason}")
    print(f"å…¥åœºä»·: {signal.price}, æ­¢æŸ: {signal.stop_loss}")
```

### 3. å¸‚åœºåˆ†æ
```python
# è·å–å®Œæ•´å¸‚åœºåˆ†æ
analysis = strategy.get_market_analysis(data, 'AAPL')

print(f"å½“å‰é˜¶æ®µ: {analysis['current_stage']}")
print(f"å·¦å³°ä¿¡æ¯: {analysis['left_peak']}")
print(f"é‡åœ¨ä»·å…ˆ: {analysis['volume_first']}")
print(f"æŠ€æœ¯é¢: {analysis['technical_summary']}")
```

### 4. å›æµ‹éªŒè¯
```python
from strong_k_backtest_engine import StrongKBacktestEngine

# åˆ›å»ºå›æµ‹å¼•æ“
engine = StrongKBacktestEngine(strategy)

# è¿è¡Œå›æµ‹
data_dict = {'AAPL': data, 'MSFT': data2}
result = engine.run_backtest(data_dict, '2020-01-01', '2023-12-31')

# æ ¸å¿ƒæŒ‡æ ‡
print(f"æ€»æ”¶ç›Šç‡: {result.total_return:.2%}")
print(f"å¼ºKæˆåŠŸç‡: {result.strong_k_success_rate:.2%}")
print(f"èƒœç‡: {result.win_rate:.2%}")
print(f"å¤æ™®æ¯”ç‡: {result.sharpe_ratio:.2f}")

# å¯è§†åŒ–ç»“æœ
engine.plot_results(result, save_path='strong_k_results.png')

# é˜¶æ®µåˆ†æ
stage_analysis = engine.analyze_stage_performance()
print("å„é˜¶æ®µè¡¨ç°:", stage_analysis)
```

### 5. å‚æ•°ä¼˜åŒ–
```python
from strong_k_backtest_engine import StrongKStrategyOptimizer

# å‚æ•°ä¼˜åŒ–
optimizer = StrongKStrategyOptimizer(StrongKBreakoutStrategy, data_dict)
param_grid = {
    'max_position_pct': [0.02, 0.03, 0.04],
    'max_positions': [2, 3, 4]
}

optimization_result = optimizer.optimize_parameters(
    param_grid, '2020-01-01', '2023-12-31', 'sharpe_ratio'
)

print("æœ€ä½³å‚æ•°:", optimization_result['best_params'])
```

## ç­–ç•¥ä¼˜åŠ¿

### âœ… é«˜ç¡®å®šæ€§
- åŸºäºä¸»åŠ›è¡Œä¸ºé€»è¾‘ï¼Œä¸æ˜¯çº¯ç²¹æŠ€æœ¯æŒ‡æ ‡
- å¤šé˜¶æ®µéªŒè¯ï¼Œå±‚å±‚è¿‡æ»¤å‡ä¿¡å·
- é‡åœ¨ä»·å…ˆå‰ç½®æ¡ä»¶æé«˜æˆåŠŸç‡

### âœ… é£é™©å¯æ§
- å¼ºKåº•éƒ¨æ­¢æŸï¼Œé£é™©æœ‰é™
- ç§»åŠ¨æ­¢æŸä¿æŠ¤åˆ©æ¶¦
- ä¸¥æ ¼ä»“ä½ç®¡ç†

### âœ… æ”¶ç›Šå¯è§‚
- æ•æ‰ä¸»å‡æµªï¼Œæ”¶ç›Šç©ºé—´å¤§
- å¼ºKçªç ´åå¾€å¾€æœ‰è¿ç»­æ‹‰å‡
- é¿å…åº•éƒ¨éœ‡è¡ï¼Œæé«˜èµ„é‡‘æ•ˆç‡

## æ³¨æ„äº‹é¡¹

### âš ï¸ æ•°æ®è¦æ±‚
- è‡³å°‘60ä¸ªäº¤æ˜“æ—¥æ•°æ®ï¼ˆç”¨äºè¯†åˆ«å®Œæ•´é˜¶æ®µï¼‰
- å¿…é¡»åŒ…å«OHLCVå®Œæ•´æ•°æ®
- å»ºè®®ä½¿ç”¨æ—¥çº¿æ•°æ®

### âš ï¸ é€‚ç”¨ç¯å¢ƒ
- é€‚åˆæœ‰æ˜æ˜¾ä¸»åŠ›æ§ç›˜ç‰¹å¾çš„ä¸ªè‚¡
- åœ¨éœ‡è¡å¸‚ä¸­ä¿¡å·è¾ƒå°‘
- éœ€è¦ç»“åˆå¸‚åœºæ•´ä½“ç¯å¢ƒåˆ¤æ–­

### âš ï¸ æ‰§è¡Œè¦ç‚¹
- ä¸¥æ ¼æŒ‰ç…§å¼ºKä¿¡å·æ‰§è¡Œï¼Œä¸æå‰å…¥åœº
- æ­¢æŸå¿…é¡»ä¸¥æ ¼æ‰§è¡Œï¼Œä¸å¯çŠ¹è±«
- å®šæœŸå¤ç›˜ï¼Œæ€»ç»“ä¸»åŠ›è¡Œä¸ºæ¨¡å¼

## ç»ƒä¹ å»ºè®®

### ğŸ“š æ¡ˆä¾‹å­¦ä¹ 
1. å¤šæ‰¾å¼ºKçªç ´çš„æˆåŠŸæ¡ˆä¾‹
2. åˆ†æå„é˜¶æ®µçš„é‡ä»·å…³ç³»
3. æ€»ç»“ä¸åŒå¸‚åœºç¯å¢ƒä¸‹çš„è¡¨ç°

### ğŸ“Š æ¨¡æ‹Ÿäº¤æ˜“
1. å…ˆç”¨å†å²æ•°æ®è¿›è¡Œæ¨¡æ‹Ÿ
2. ç†Ÿæ‚‰ä¿¡å·è¯†åˆ«å’Œæ‰§è¡Œæµç¨‹
3. éªŒè¯æ­¢æŸå’Œæ­¢ç›ˆæ•ˆæœ

### ğŸ”„ æŒç»­ä¼˜åŒ–
1. è®°å½•æ¯ç¬”äº¤æ˜“çš„é˜¶æ®µç‰¹å¾
2. åˆ†æå¤±è´¥æ¡ˆä¾‹çš„åŸå› 
3. æ ¹æ®å®æˆ˜è°ƒæ•´å‚æ•°

## æ–‡ä»¶ç»“æ„

```
grape-finance/
â”œâ”€â”€ strong_k_breakout_strategy.py    # å¼ºKç­–ç•¥æ ¸å¿ƒå®ç°
â”œâ”€â”€ strong_k_backtest_engine.py       # ä¸“ç”¨å›æµ‹å¼•æ“
â”œâ”€â”€ README_strong_k_strategy.md       # ç­–ç•¥è¯¦ç»†è¯´æ˜
â””â”€â”€ data/                            # æ•°æ®æ–‡ä»¶ç›®å½•
```

## ä¾èµ–åŒ…

```bash
pip install pandas numpy talib matplotlib
```

## å…è´£å£°æ˜

æœ¬ç­–ç•¥ä»…ä¾›å­¦ä¹ å’Œç ”ç©¶ä½¿ç”¨ï¼Œä¸æ„æˆæŠ•èµ„å»ºè®®ã€‚è‚¡å¸‚æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚åœ¨å®é™…ä½¿ç”¨å‰ï¼Œè¯·å……åˆ†äº†è§£ç­–ç•¥åŸç†å¹¶è¿›è¡Œå……åˆ†çš„å†å²å›æµ‹éªŒè¯ã€‚
